<svg:g id="{{ node.id }}" class="node-container" [attr.transform]="'translate(' + node.x + ',' + node.y + ')'">
  <svg:g
    *ngIf="selected$ | async"
    node-selection-halo
    [nodeId]="node.id"
    [nodeWidth]="node.width"
    [nodeHeight]="hasHref ? node.height : nodeHeaderHeight"
  ></svg:g>
  <foreignObject
    *ngIf="selected$ | async"
    [attr.x]="node.width"
    [attr.width]="75"
    [attr.height]="hasHref ? node.height : selectionBarMinHeight"
  >
    <div class="node-actions-wrapper table-actions">
      <div fxFlex fxLayout="column" fxLayoutAlign="center center">
        <button mat-icon-button (click)="toggleLock()">
          <mat-icon *ngIf="node.locked" fxFlex>lock</mat-icon>
          <mat-icon *ngIf="!node.locked" fxFlex>lock_open</mat-icon>
        </button>
        <button mat-icon-button (click)="delete()">
          <mat-icon fxFlex>delete</mat-icon>
        </button>
      </div>
    </div>
  </foreignObject>
  <foreignObject
    class="node-content"
    [attr.width]="node.width"
    [attr.height]="hasHref ? nodeHeaderHeight : node.height"
  >
    <div
      *ngIf="isDragging$ | async"
      class="drag-overlay"
      [ngStyle]="{ height: hasHref ? node.height : nodeHeaderHeight }"
    ></div>
    <node-header
      [title]="node.title"
      [isBlocked$]="isBlocked$"
      (updatedTitle$)="updatedTitle$.next($event)"
      (enterKeyPressed$)="renderEmbedding($event)"
    ></node-header>
    <button mat-icon-button (click)="renderEmbedding()" color="accent" aria-label="" class="submit-href-button">
      <mat-icon>send</mat-icon>
    </button>
  </foreignObject>
</svg:g>
