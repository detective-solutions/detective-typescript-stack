<div class="component-wrapper" [class.isMobile]="isMobile$ | async">
  <cdk-virtual-scroll-viewport
    *ngIf="(tableRows$ | async) && tableDataSource; else isLoading"
    class="table-container"
    (scroll)="onScroll($event)"
    tvsItemSize="120"
  >
    <mat-table [dataSource]="tableDataSource">
      <ng-container [matColumnDef]="column.id" *ngFor="let column of columnDefinitions">
        <mat-header-cell *matHeaderCellDef fxLayoutAlign="center center">
          {{ column.name }}
        </mat-header-cell>
        <mat-cell *matCellDef="let item" [attr.data-label]="column.name" fxLayoutAlign="center center">
          <div dynamicTableCell class="dynamic-table-cell">
            <ng-template
              dynamicTableCell
              [casefileId]="item[column.id].casefileId"
              [tableCellData]="item[column.id].cellData"
            ></ng-template>
          </div>
        </mat-cell>
      </ng-container>
      <mat-header-row *matHeaderRowDef="columnIds; sticky: true"></mat-header-row>
      <mat-row *matRowDef="let row; columns: columnIds"></mat-row>
    </mat-table>
  </cdk-virtual-scroll-viewport>
  <mat-progress-bar *ngIf="isFetchingMoreData" mode="query" color="accent"></mat-progress-bar>
  <ng-template #isLoading>
    <div class="loading-spinner"></div>
  </ng-template>
</div>
