<div class="component-wrapper" *transloco="let t; read: 'tiles'">
  <div
    *ngIf="tilesInput$ | async as tilesInput; else isLoading"
    class="tiles-container"
    fxLayout="row wrap"
    matchTileHeight="tile"
    (scroll)="onScroll($event)"
  >
    <div
      class="tile-wrapper"
      fxFlex
      fxFlex.xs="100%"
      fxFlex.sm="100%"
      fxFlex.md="50%"
      fxFlex.lg="25%"
      fxFlex.xl="16.666%"
    >
      <mat-card class="tile new-casefile-tile mat-elevation-z3" fxLayout="column" fxLayoutAlign="center center">
        <div>
          <mat-icon fxLayoutAlign="center center">add</mat-icon>
          <span>{{ t('newCasefileTileTitle') }}</span>
        </div>
      </mat-card>
    </div>

    <div
      class="tile-wrapper"
      fxFlex
      fxFlex.xs="100%"
      fxFlex.sm="100%"
      fxFlex.md="50%"
      fxFlex.lg="25%"
      fxFlex.xl="16.666%"
      *ngFor="let tile of tilesInput.tiles"
    >
      <mat-card class="tile" fxLayout="column" fxLayoutAlign="space-between center">
        <mat-card-title>{{ tile.title }}</mat-card-title>
        <img
          mat-card-image
          height="200px"
          src="assets/images/mocks/casefile-thumbnail-mock.jpg"
          alt="{{ t('tileImageAltAttribute') }}"
        />
        <mat-card-content *ngIf="tile.description; else noTileDescription"
          ><p [matTooltip]="tile.description">{{ tile.description }}</p></mat-card-content
        >
        <ng-template #noTileDescription
          ><p>{{ t('tileDescriptionPlaceholderText') }}</p></ng-template
        >
        <mat-card-actions>
          <button mat-button attr.aria-label="{{ t('tileOpenButtonLabel') }}">{{ t('tileOpenButtonText') }}</button>
          <button mat-flat-button class="share-button" attr.aria-label="{{ t('tileShareButtonLabel') }}">
            <mat-icon>share</mat-icon>
          </button>
        </mat-card-actions>
      </mat-card>
    </div>
  </div>
  <mat-progress-bar *ngIf="isFetchingMoreData" mode="query" color="accent"></mat-progress-bar>
  <ng-template #isLoading>
    <div class="loading-spinner"></div>
  </ng-template>
</div>
