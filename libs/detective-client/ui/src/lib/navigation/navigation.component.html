<mat-sidenav-container *transloco="let t; read: 'navigation'">
  <mat-sidenav
    #drawer
    fixedInViewport
    [attr.role]="(isHandset$ | async) ? 'dialog' : 'navigation'"
    [mode]="(isHandset$ | async) ? 'over' : 'side'"
    [opened]="(isHandset$ | async) === false"
  >
    <mat-toolbar id="home-sidenav-header" fxLayoutAlign="start center"
      ><a routerLink="/" fxLayoutAlign="center center" id="home-sidenav-logo"
        ><img src="assets/images/detective-logo.png" alt="Logo" /><span>detective</span></a
      >
    </mat-toolbar>

    <div id="home-sidebar-toggle">
      <mat-icon (click)="drawer.toggle()" title="Close sidebar">chevron_left</mat-icon>
    </div>

    <mat-nav-list id="home-sidebar-list" fxLayout="column">
      <a
        *ngFor="let item of sidenavItems"
        mat-list-item
        class="home-sidebar-item"
        [routerLink]="item.route"
        routerLinkActive="route-active"
        title="{{ item.title }}"
        ><span fxLayoutAlign="start center"
          ><mat-icon>{{ item.icon }}</mat-icon> {{ item.translationKey | transloco }}</span
        ></a
      >

      <a
        mat-list-item
        class="home-sidebar-admin-item"
        [routerLink]="sidenavBottomItem.route"
        title="{{ sidenavBottomItem.title }}"
        ><span fxLayoutAlign="center center"
          ><mat-icon>{{ sidenavBottomItem.icon }}</mat-icon
          >{{ sidenavBottomItem.translationKey | transloco }}</span
        ></a
      >
    </mat-nav-list>
  </mat-sidenav>
  <mat-sidenav-content
    [ngClass]="{
      'close-home-toolbar-gap': drawer.opened
    }"
  >
    <mat-toolbar class="custom-header-bar" fxLayout="row">
      <button
        type="button"
        aria-label="Toggle sidebar"
        title="Toggle sidebar"
        mat-icon-button
        (click)="drawer.toggle()"
        *ngIf="!drawer.opened"
      >
        <mat-icon aria-label="Home sidebar toggle">menu</mat-icon>
      </button>

      <span *ngIf="showTileToggle" fxLayoutAlign="center center" fxHide.md fxHide.sm fxHide.xs>
        <span class="view-toggle" fxLayoutAlign="center center">
          <mat-icon>view_module</mat-icon>
          <mat-slide-toggle color="primary"></mat-slide-toggle>
          <mat-icon>list</mat-icon>
        </span>
      </span>

      <div *ngIf="showSearchInput; else noSearchInput" class="search-input" fxFlex="auto" fxLayoutAlign="center center">
        <mat-form-field appearance="outline">
          <mat-label>{{ t('searchbarPlaceholder') }}</mat-label>
          <input matInput type="text" [(ngModel)]="searchValue" />
          <button *ngIf="searchValue" matSuffix mat-icon-button aria-label="Clear" (click)="searchValue = ''">
            <mat-icon>close</mat-icon>
          </button>
        </mat-form-field>
      </div>
      <ng-template #noSearchInput><span fxFlex></span></ng-template>

      <span fxLayoutAlign="center center" fxHide.sm fxHide.xs>
        <button mat-raised-button color="accent" class="invite-button">{{ t('inviteButtonText') }}</button>
      </span>

      <span fxLayoutAlign="center center">
        <button mat-icon-button class="notifications-button" aria-label="Notifications" [disabled]="true">
          <mat-icon>notifications</mat-icon>
        </button>
      </span>

      <span fxLayoutAlign="center center" fxHide.md fxHide.sm fxHide.xs>
        <button mat-icon-button class="account-button" [matMenuTriggerFor]="profileMenu" aria-label="Profile">
          <mat-icon>account_circle</mat-icon>
          <span>Testuser</span>
          <mat-icon>expand_more</mat-icon>
        </button>
        <mat-menu #profileMenu="matMenu" xPosition="before">
          <button mat-menu-item>
            <mat-icon>settings</mat-icon>
            {{ t('userMenu.account') }}
          </button>
          <button mat-menu-item>
            <mat-icon>description</mat-icon>
            {{ t('userMenu.documentation') }}
          </button>
          <button mat-menu-item>
            <mat-icon>logout</mat-icon>
            {{ t('userMenu.logout') }}
          </button>
        </mat-menu>
      </span>

      <span fxLayoutAlign="center center" fxHide.lg fxHide.xl>
        <button mat-icon-button [matMenuTriggerFor]="mobileMenu">
          <mat-icon>more_vert</mat-icon>
        </button>
        <mat-menu #mobileMenu="matMenu" xPosition="before">
          <button fxHide.md mat-menu-item>
            <mat-icon>meeting_room</mat-icon>
            {{ t('inviteButtonText') }}
          </button>
          <button mat-menu-item>
            <mat-icon>settings</mat-icon>
            {{ t('userMenu.account') }}
          </button>
          <button mat-menu-item>
            <mat-icon>description</mat-icon>
            {{ t('userMenu.documentation') }}
          </button>
          <button mat-menu-item>
            <mat-icon>logout</mat-icon>
            {{ t('userMenu.logout') }}
          </button>
        </mat-menu>
      </span>
    </mat-toolbar>
    <router-outlet></router-outlet>
  </mat-sidenav-content>
</mat-sidenav-container>
